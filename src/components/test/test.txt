import React, { useState } from "react";
import "bootstrap/dist/css/bootstrap.min.css";
import AccessLevelModal from "./AccessLevelModal"; // Import the AccessLevelModal component

const InvitationModal = ({ show, onClose, onSubmit }) => {
  // ... (initial state and other code)

  // Function to log all checkbox values from AccessLevelModal
  const logAllCheckboxValues = (checkboxValues) => {
    console.log("Selected Checkbox Values:", checkboxValues);
  };

  // Modified handleChange function to include logAllCheckboxValues
  const handleChange = (e) => {
    const { name, value, type, selectedOptions, files } = e.target;
    if (type === "select-multiple") {
      const options = Array.from(selectedOptions).map((option) => option.value);
      setFormData((prevData) => ({
        ...prevData,
        [name]: options,
      }));
      setIsAccessLevelButtonDisabled(false);
      
      // Trigger logging checkbox values when position changes
      logAllCheckboxValues(selectedCheckboxValues);
      
      // ... (existing special options logic)
    } else if (type === "file") {
      setFormData((prevData) => ({
        ...prevData,
        [name]: files[0],
      }));
    } else {
      setFormData((prevData) => ({
        ...prevData,
        [name]: value,
      }));
    }
  };

  // Modified handleAccessLevelSubmit function to include logAllCheckboxValues
  const handleAccessLevelSubmit = (selectedCheckboxValues) => {
    setIsAccessLevelButtonDisabled(true);
    setShowAccessLevelModal(false);

    // Log the selected checkbox values when access level is submitted
    logAllCheckboxValues(selectedCheckboxValues);
  };

  return (
    <div className={`modal ${show ? "d-block" : "d-none"}`} tabIndex="-1">
      <div className={`modal-dialog ${modalClass}`}>
        <div className="modal-content">
          {/* ... (existing code) */}
          <AccessLevelModal
            show={showAccessLevelModal}
            onClose={toggleAccessLevelModal}
            onAccessLevelSubmit={handleAccessLevelSubmit} // Passing handleAccessLevelSubmit to AccessLevelModal
          />
        </div>
      </div>
    </div>
  );
};

export default InvitationModal;
